<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projekt Chimera: Das Goldene Zeitalter</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Bestehende Styles unverändert */
    </style>
</head>
<body class="p-4 md:p-8">
    <div id="game-container" class="max-w-7xl mx-auto">
        <!-- HEADER unverändert -->
        <!-- MAIN GRID unverändert -->
    </div>
    <!-- MODAL erweitert um Reaktions-Buttons und Multimedia -->
    <div id="modal" class="fixed inset-0 z-50 items-center justify-center hidden modal-backdrop">
        <div class="modal-content rounded-lg p-8 m-4 max-w-lg w-full shadow-2xl shadow-cyan-500/20">
            <h3 id="modal-title" class="font-orbitron text-2xl mb-4 text-cyan-300"></h3>
            <p id="modal-body" class="mb-6"></p>
            <div id="modal-media" class="mb-4"></div> <!-- Neu: Für Audio/Video/GIF -->
            <div id="reaction-buttons" class="space-y-2 mb-4"></div> <!-- Neu: Für Reaktions-Buttons -->
            <button id="modal-close" class="w-full action-button p-2 rounded-lg font-bold">Weiter</button>
        </div>
    </div>
    <script>
        // Bestehender Code (levyLegacyText, gameState, drehbuchSlots, gambits, randomEvents, render) unverändert, außer:
        // Erweiterte randomEvents mit Emoticons, Auswirkungen und interaktiven Reaktionen
        const randomEvents = [
            // ... Bestehende Events ...
            { title: "Micrometeoroid-Schauer ☄️", text: "Dein Schiff wird beschädigt (Drehbuch: Hull breach!).", effect: (state) => { 
                state.resources.kapital.value -= 30; 
                addLog("Schauer trifft! 'Pressure loss – stabilize the ship!' ☄️", "warning"); 
                showInteractiveModal("Raum-Krise", "Nutze Dr. Pepper-Methode zur Lokalisierung? Opfere Ressourcen für Reparatur.", [
                    { label: "Reparieren", action: () => { state.resources.daten.value -= 20; state.resources.kapital.value += 15; addLog("Reparatur erfolgreich! Schaden minimiert. 🔧", "event"); playAudio('https://www.nasa.gov/wp-content/uploads/2023/04/insight-martian-wind.wav'); } },
                    { label: "Ignorieren", action: () => { addLog("Schaden ignoriert – weitere Verluste möglich. ⚠️", "warning"); } }
                ], 'https://media.giphy.com/media/l0HlK3VUCtB2G4m52/giphy.gif'); // GIF Trigger
            } },
            { title: "Alien-Entdeckung 🛸", text: "Hologramm zeigt Mars-Geschichte (Drehbuch: 'Martians seeded Earth').", effect: (state) => { 
                state.resources.hebel.value += 50; 
                if (Math.random() < 0.2) state.resources.legitimitaet.value -= 10; 
                addLog("Entdeckung: 'The Cambrian explosion – we are them!' 🛸", "event"); 
                showInteractiveModal("Alien-Kontakt", "Kontakt herstellen oder beobachten?", [
                    { label: "Kontakt herstellen", action: () => { state.resources.daten.value += 20; addLog("Kontakt erfolgreich! Daten-Gewinn. 📡", "event"); playVoice('The universe is not chaos. It\'s connection.'); } },
                    { label: "Beobachten", action: () => { addLog("Beobachtung: Kein Risiko, aber verpasster Boost. 👀", "info"); } }
                ], 'https://media.giphy.com/media/3o7abKhOpu0Nbn9uEo/giphy.gif'); // GIF Trigger
            } }
        ];

        // Neu: Funktion für interaktive Modals mit Buttons, GIF/Video, Audio
        function showInteractiveModal(title, body, reactions = [], gifSrc = '', audioSrc = '') {
            modalTitle.innerText = title;
            modalBody.innerText = body;
            const mediaDiv = document.getElementById('modal-media');
            mediaDiv.innerHTML = '';
            if (gifSrc) {
                mediaDiv.innerHTML += `<img src="${gifSrc}" alt="Event GIF" class="w-full mb-2">`;
            }
            if (audioSrc) {
                mediaDiv.innerHTML += `<audio autoplay src="${audioSrc}"></audio>`;
            }
            const buttonsDiv = document.getElementById('reaction-buttons');
            buttonsDiv.innerHTML = '';
            reactions.forEach(reaction => {
                const btn = document.createElement('button');
                btn.className = 'w-full action-button p-2 mb-2 rounded-lg font-bold';
                btn.innerText = reaction.label;
                btn.onclick = () => { reaction.action(); modal.classList.add('hidden'); modal.classList.remove('flex'); render(); saveGame(); };
                buttonsDiv.appendChild(btn);
            });
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            playVoice(body); // Voice abspielen
        }

        // Neu: Audio-Playback-Funktion (z.B. NASA-Sounds)
        function playAudio(src) {
            const audio = new Audio(src);
            audio.play().catch(err => addLog(`Audio-Fehler: ${err.message}`, 'warning'));
        }

        // Bestehende Funktionen (addLog, executeGambit, nextTurn, checkVictory, showModal, playVoice, saveGame, loadGame) mit Anpassungen für Emoticons und Auswirkungen unverändert.

        // INITIALIZE GAME unverändert
    </script>
    ©®™ ROSARY 2025 ff
    Be a SuperHero! -"CHIMMY"
</body>
</html>
